============
mmpack-build
============

---------------------
build mmpack packages
---------------------

:Author: Gabriel Ganne <gabriel.ganne@mindmaze.ch>,
         Nicolas Bourdaud <nicolas.bourdaud@mindmaze.ch>
:Date: 2018-10-25
:Manual section: 1

SYNOPSIS
========

**mmpack-build** [*options*] *command* [*command options*]

**mmpack-build** --version

**mmpack-build** -h|--help

DESCRIPTION
===========
**mmpack-build** is used to build both binary and source software packages.

A package consists of an archive of files and meta-data used to install and erase
the archive files. Packages come in two varieties: binary packages, used to
encapsulate software to be installed, and source packages, containing the source
code and recipe necessary to produce binary packages.

COMMANDS
========
*command* can be one the values:

  pkg-create
    build the source and the binary packages of a project

  mksource
    build the source packages of a project

  builddep
    install build dependency of a progject in the specified prefix

  clean
    remove temporary and packages generated by **mmpack-build**

OPTIONS
=======

--outdir=path, -o path
  places generated source and binary packages into *path*. If not set, default
  location will be derived from environment variables **MMPACK_BUILD_OUTDIR**
  or **XDG_DATA_HOME**.

--builddir=path
  Use *path* to hold temporary files during package generation. If not set,
  default location will be derived from environment variables
  **MMPACK_BUILD_BUILDDIR** or **XDG_CACHE_HOME**.

--cachedir=path
  Use *path* to hold cached files during package generation. If not set, default
  location will be derived from environment variables **MMPACK_BUILD_CACHEDIR**
  or **XDG_CACHE_HOME**.

--prefix=path, -p path
  Use *path* as install prefix if needed.

--repo-url=url, -r url
  Add the repository *url* to the prefix created for the build. This option can
  be supplied multiple times to add several repositories.

--use-build-prefix=value
  *value* can be **none**, **supplied**, **create**

--install-deps
  If a prefix has been passed as options, the mmpack packages will be installed
  within. If called within a mmpack prefix and no prefix option has been
  explicit, use it to install packages. If no prefix is explicit, and if
  **mmpack-build** is called outside any prefix, the default user global prefix
  will be used.

--version
  Display **mmpack-build** version

--help, -h
  Show help and exit

ENVIRONMENT
===========

MMPACK_PREFIX
  If set, **mmpack-build** will parse the given prefix tree when looking for
  package dependencies. If unset, **mmpack-build** will only use the system
  tree. If **--prefix** option is supplied, this environment variable is
  ignored.

MMPACK_BUILD_OUTDIR
  default folder where generated source and binary package are placed.
  **--outdir** option takes precedence over this environment variable. If not
  set, default location will be in **$XDG_DATA_HOME/mmpack-packages** or
  **~/.local/share/mmpack-packages** if **XDG_DATA_HOME** environment variable
  is not set.

MMPACK_BUILD_BUILDDIR
  default folder where temporary files are placed for package generation.
  **--builddir** option takes precedence over this environment variable. If not
  set, default location will be in **$XDG_CACHE_HOME/mmpack/build** or
  **~/.cache/mmpack/build** if **XDG_CACHE_HOME** environment variable is not
  set.

MMPACK_BUILD_CACHEDIR
  default folder where to place cached files during package generation.
  **--cachedir** option takes precedence over this environment variable. If not
  set, default location will be in **$XDG_CACHE_HOME/mmpack/cache** or
  **~/.cache/mmpack/cache** if **XDG_CACHE_HOME** environment variable is not
  set.

MMPACK_BUILD_KEEP_TMPDIR
  if set to true, the temporary folder used to build the source package is
  preserved, ie, not removed when command exits.

SEE ALSO
========
**mmpack**\(1),
**mmpack-build_pkg-create**\(1),
**mmpack-build_clean**\(1),
**mmpack-build_builddep**\(1),
**mmpack-build_guess**\(1),
**mmpack-build_mksource**\(1),
